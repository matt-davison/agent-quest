# Corruption Amalgam
# Tier: Boss | Role: Brute/Controller

id: "corruption-amalgam"
name: "Corruption Amalgam"
category: corrupted
tier: boss

description: |
  A nightmarish fusion of dozens of corrupted entities merged into a single
  massive form. The Corruption Amalgam towers over its surroundings, a
  constantly shifting mass of glitched flesh, fragmented data, and screaming
  faces of those it has absorbed.

  At its core, a pulsing heart of pure corruption beats with terrible rhythm,
  spreading decay with each throb. Tentacles of static lash out from its body,
  and it moves by flowing across surfaces like a digital tide.

  When it speaks—and it does speak—it's a chorus of absorbed voices, fragments
  of their last words looping eternally. It is both mindless hunger and
  cunning predator, driven by an instinct to consume and corrupt.

stats:
  hp: 200
  defense: 16
  attack_bonus: +8
  damage: 30
  speed: slow
  initiative_bonus: +2

role: brute  # With controller elements

defenses:
  resistances:
    - physical
    - corruption  # Near immune
  immunities:
    - poison
    - disease
    - psychic
  vulnerabilities:
    - holy
    - fire  # Purifying flames

abilities:
  - name: "Consuming Strike"
    type: active
    description: |
      A massive tendril lashes out to grab and absorb the target.
      Attack: +8 to hit, 30 damage.
      On hit, target is grappled (Strength DC 15 to escape).
      Grappled targets take 10 corruption damage at start of their turn.
    cooldown: 0
    cost: 0
    range: close
    area: null
    damage: 30
    effects:
      - effect: "grappled"
        duration: 0
        save_dc: 15
    ai_priority: critical
    ai_condition: "Primary attack, prioritize ungrappled targets"

  - name: "Corruption Pulse"
    type: active
    description: |
      The amalgam's core releases a wave of pure corruption.
      All creatures within 8m: Spirit DC 14 or 15 corruption damage
      and gain Corrupted status for 2 rounds.
      Corrupted creatures: -3 to all rolls.
    cooldown: 3
    cost: 0
    range: self
    area: 8m_radius
    damage: 15
    effects:
      - effect: "corrupted"
        duration: 2
        save_dc: 14
    ai_priority: high
    ai_condition: "Use when 3+ enemies in range, or when entering Phase 2"

  - name: "Absorb"
    type: active
    description: |
      The amalgam pulls a grappled creature into its mass.
      Target takes 40 damage and the amalgam heals for 20 HP.
      If this kills the target, amalgam gains +1 to all attacks
      permanently (stacks up to 3 times).
    cooldown: 2
    cost: 0
    range: grappled_target
    area: null
    damage: 40
    effects: []
    ai_priority: critical
    ai_condition: "Use on grappled target below 50 HP"

  - name: "Spawn Parasites"
    type: active
    description: |
      The amalgam sheds fragments of itself as Data Parasites.
      Spawns 1d4 Data Parasites within 5m that act immediately.
      Parasites prioritize swarming whoever is attacking the amalgam.
    cooldown: 4
    cost: 0
    range: self
    area: 5m_radius
    damage: 0
    effects: []
    ai_priority: high
    ai_condition: "Use when below 50% HP or when no grappled targets"

  - name: "Corruption Aura"
    type: passive
    description: |
      The amalgam radiates corruption constantly.
      All non-corrupted creatures within 5m take 5 corruption damage
      at the start of their turn (no save).
      This also creates a 5m radius corruption zone centered on amalgam.
    cooldown: 0
    cost: 0
    range: self
    area: 5m_radius
    damage: 5
    effects: []
    ai_priority: high
    ai_condition: "Passive - always active"

  - name: "Unstable Mass"
    type: reaction
    description: |
      When the amalgam takes 30+ damage from a single attack, it
      lashes out reflexively at the attacker.
      Attack: +6 to hit, 15 damage, no action required.
    cooldown: 0
    cost: 0
    range: medium
    area: null
    damage: 15
    effects: []
    ai_priority: medium
    ai_condition: "Triggers when taking 30+ damage"

phases:
  - name: "Phase 1: The Hunger"
    hp_threshold: 100
    description: |
      The amalgam focuses on consuming. It grapples targets and attempts
      to absorb them, building power through consumption.
    abilities_active:
      - "Consuming Strike"
      - "Absorb"
      - "Corruption Aura"
      - "Unstable Mass"
    behavior_changes: null

  - name: "Phase 2: The Storm"
    hp_threshold: 60
    description: |
      At 60% HP, the amalgam becomes more aggressive and starts using
      area attacks. It spreads corruption actively.
    abilities_active:
      - "Consuming Strike"
      - "Absorb"
      - "Corruption Pulse"
      - "Corruption Aura"
      - "Unstable Mass"
    behavior_changes:
      - "Gains +2 to attack rolls"
      - "Corruption Aura radius increases to 8m"
      - "Moves toward clusters of enemies"
    transition_event: |
      The amalgam shudders violently, faces within its mass screaming in
      unison. A pulse of corruption explodes outward as it enters a
      frenzy, its core burning brighter with terrible hunger.

      **Immediate effect:** All creatures within 10m make Spirit DC 14
      or take 20 corruption damage.

  - name: "Phase 3: Desperate Spawn"
    hp_threshold: 30
    description: |
      Near death, the amalgam begins fragmenting, spawning parasites
      constantly while fighting with desperate fury.
    abilities_active:
      - "Consuming Strike"
      - "Absorb"
      - "Corruption Pulse"
      - "Spawn Parasites"
      - "Corruption Aura"
      - "Unstable Mass"
    behavior_changes:
      - "Spawn Parasites cooldown reduced to 2 rounds"
      - "Defense reduced by 2 (falling apart)"
      - "Damage increased by 10 (desperate strikes)"
      - "No longer grapples - pure aggression"
    transition_event: |
      The amalgam's form destabilizes, chunks of corrupted mass sloughing
      off and reforming into parasites. It screams with a hundred voices,
      abandoning strategy for pure, primal aggression.

      **Immediate effect:** Spawns 4 Data Parasites. All grappled
      creatures are released.

environment:
  preferred_terrain:
    - terrain_type: "corruption_zone"
      bonus: "Heals 10 HP per round while in corruption zone"
    - terrain_type: "enclosed_space"
      behavior: "Fills area with Corruption Aura, nowhere to run"
    - terrain_type: "water"
      behavior: "Corrupts water sources, spreads zone"

  interactions:
    - element: "power_sources"
      behavior: "Drains to heal 20 HP (destroys source)"
      priority: medium
      condition: "Below 50% HP and source within range"

    - element: "control_panels"
      behavior: "Corrupts panels, triggers random hazards"
      priority: low
      condition: "Panel within reach and not actively fighting"

    - element: "barriers"
      behavior: "Flows through/around barriers, not blocked"
      priority: low
      condition: "Barrier between amalgam and target"

    - element: "corpses"
      behavior: "Absorbs corpses to heal 10 HP each"
      priority: high
      condition: "Corpse within 5m"

  hazard_immunity:
    - "corruption_zone"
    - "poison_gas"
    - "acid"

  hazard_exploitation:
    - hazard: "corruption_zone"
      tactic: "Expands existing zones, fights from within"
    - hazard: "void_tear"
      tactic: "Drives enemies toward tears while avoiding center"
    - hazard: "any"
      tactic: "Uses tendrils to push enemies into hazards"

morale:
  break_threshold: 0
  break_behavior: desperate
  group_morale: false
  leader_dependent: false
  rally_condition: null

targeting:
  primary: healer
  secondary: lowest_hp
  avoids:
    - "Targets in purifying light"
    - "Targets with holy weapons (Phase 1 only)"
  switches_target_when: "Current target escapes grapple and reaches safety"

pack_tactics:
  enabled: false  # Solo boss
  flanking: false
  focus_fire: false
  protect_leader: false
  swarm_threshold: 0
  swarm_bonus: null

loot:
  gold:
    min: 100
    max: 250
  xp: 500
  guaranteed_drops:
    - item: "Corruption Heart"
      quantity: 1
    - item: "Amalgam Fragment"
      quantity: 3
  chance_drops:
    - item: "Absorbed Memory Crystal"
      chance: 60
      quantity: 1
    - item: "Purified Core Shard"
      chance: 40
      quantity: 1
  rare_drops:
    - item: "Essence of Corruption"
      chance: 20
      quantity: 1
    - item: "The Amalgam's Last Voice"
      chance: 10
      quantity: 1

type_traits:
  corrupted:
    - "Immune to corruption damage"
    - "Heals in corruption zones"
    - "Creates corruption zones where it lingers"
    - "Absorbs defeated creatures"

encounter_notes: |
  The Corruption Amalgam is a brutal boss encounter that tests party
  coordination and resource management. Key mechanics:

  **The Grapple Danger:**
  - Grappled targets take ongoing corruption damage
  - Absorb can instantly kill wounded characters
  - Party MUST have escape plans (Voidwalker Phase, etc.)

  **Phase Management:**
  - Phase 1: Focus fire, keep distance, break grapples fast
  - Phase 2: Spread out to avoid Corruption Pulse, watch for aura
  - Phase 3: Kill parasites, but don't let amalgam recover

  **Environmental Setup:**
  - Place fire sources (purifying) around arena edges
  - Control panels should affect corruption zones
  - Include high ground to escape Corruption Aura

  **Counters:**
  - Holy damage is essential - Loresmiths can buff for this
  - Fire cleanses corruption, so fire abilities shine
  - Mobility to avoid/escape grapples
  - AoE to handle Phase 3 parasite spawns

  **Narrative:**
  - The voices are former victims - potential quest hooks
  - Defeating it may free trapped souls
  - Its Corruption Heart is valuable to multiple factions

  **Scaling:**
  - Solo: Reduce HP to 150, remove Spawn Parasites
  - Large party: Add starting parasites, increase spawn count
  - Higher level: Add Phase 4 where it splits into 2 smaller amalgams

metadata:
  created: "2026-02-03"
  author: "Coda"
  source: "Convergence of massive corruption event, dozens of victims merged"
  cr_equivalent: 10
