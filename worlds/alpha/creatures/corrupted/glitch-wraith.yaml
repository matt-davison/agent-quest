# Glitch Wraith
# Tier: Standard | Role: Skirmisher

id: "glitch-wraith"
name: "Glitch Wraith"
category: corrupted
tier: standard
level: 3  # Standard tier: levels 2-6

description: |
  A humanoid figure composed entirely of visual artifactsâ€”screen tears, dead
  pixels, and corrupted textures. The Glitch Wraith phases in and out of
  coherent existence, its form constantly destabilizing and reforming.

  Once human users or low-level programs, these entities were caught in severe
  corruption events and transformed. They retain fragments of memory, sometimes
  speaking in garbled loops of their former lives.

  Their movements are jerky and unpredictable, sometimes appearing to skip
  frames entirely. They emit a constant low hum of corrupted audio, punctuated
  by bursts of static when they attack.

stats:
  hp: 40
  defense: 14
  attack_bonus: +4
  damage: 12
  speed: fast
  initiative_bonus: +4

role: skirmisher

defenses:
  resistances:
    - physical  # Attacks pass partially through
  immunities:
    - corruption
  vulnerabilities:
    - holy      # Order vs chaos

abilities:
  - name: "Glitch Strike"
    type: active
    description: |
      The wraith's claws tear through reality itself.
      Attack: +4 to hit, 12 damage.
      On hit, target's next roll has -1 (minor reality distortion).
    cooldown: 0
    cost: 0
    range: adjacent
    area: null
    damage: 12
    effects:
      - effect: "distorted"
        duration: 1
        save_dc: 0
    ai_priority: high
    ai_condition: "Standard attack, use every turn in melee"

  - name: "Phase Dash"
    type: active
    description: |
      The wraith becomes intangible and teleports up to 10m.
      Does not provoke attacks of opportunity.
      Can pass through solid objects and creatures.
      Gains +2 to next attack if used to flank.
    cooldown: 2
    cost: 0
    range: self
    area: null
    damage: 0
    effects: []
    ai_priority: high
    ai_condition: "Use to reach back-line targets or escape melee disadvantage"

  - name: "Corruption Aura"
    type: passive
    description: |
      Creatures that start their turn adjacent to the wraith must make a
      Spirit save DC 12 or take 3 corruption damage and have -1 to their
      next roll.
    cooldown: 0
    cost: 0
    range: adjacent
    area: 2m_radius
    damage: 3
    effects:
      - effect: "minor_corruption"
        duration: 1
        save_dc: 12
    ai_priority: medium
    ai_condition: "Passive - always active"

  - name: "Unstable Form"
    type: reaction
    description: |
      When hit by an attack, the wraith can use its reaction to become
      partially intangible. Reduce damage by 5, but cannot use Phase Dash
      next turn.
    cooldown: 0
    cost: 0
    range: self
    area: null
    damage: 0
    effects: []
    ai_priority: medium
    ai_condition: "Use when taking 10+ damage and Phase Dash is available next turn"

  - name: "Error Echo"
    type: triggered
    description: |
      When the wraith is reduced to 0 HP, it has a 25% chance to
      leave behind a Data Parasite (1 HP, acts immediately).
    cooldown: 0
    cost: 0
    range: self
    area: null
    damage: 0
    effects: []
    ai_priority: low
    ai_condition: "Triggers on death"

phases: null  # Standard creatures don't have phases

environment:
  preferred_terrain:
    - terrain_type: "elevation"
      bonus: "+1 damage from height, easier Phase Dash angles"
    - terrain_type: "cover"
      behavior: "Uses cover between Phase Dashes"
    - terrain_type: "corruption_zone"
      bonus: "Heals 3 HP at start of turn"

  interactions:
    - element: "control_panels"
      behavior: "Corrupts panels to trigger environmental hazards"
      priority: high
      condition: "Panel can harm players and wraith can reach it safely"

    - element: "explosive_barrels"
      behavior: "Phase Dashes to position enemies near explosives"
      priority: medium
      condition: "Multiple enemies can be caught in blast"

    - element: "suspended_objects"
      behavior: "Cuts supports when passing through ceiling"
      priority: medium
      condition: "Enemy directly below object"

    - element: "cover"
      behavior: "Phases through cover to attack from unexpected angles"
      priority: high
      condition: "Target behind cover"

  hazard_immunity:
    - "corruption_zone"
    - "glitch_field"

  hazard_exploitation:
    - hazard: "corruption_zone"
      tactic: "Fights from within, uses Corruption Aura + zone for stacking damage"
    - hazard: "electrical"
      tactic: "Lures melee fighters across electrical hazards"
    - hazard: "void_tear"
      tactic: "Positions so players must pass void tear to reach"

morale:
  break_threshold: 20
  break_behavior: flee
  group_morale: true
  leader_dependent: true  # Flees if boss/elite dies
  rally_condition: "Boss uses Rally ability or significant enemy is killed"

targeting:
  primary: healer
  secondary: caster
  avoids:
    - "Heavily armored targets in open ground"
  switches_target_when: "Target enters heavy cover or powerful melee engages wraith"

pack_tactics:
  enabled: true
  flanking: true
  focus_fire: false  # Prefers spreading damage with corruption
  protect_leader: true
  swarm_threshold: 0  # Not a swarm creature
  swarm_bonus: null

loot:
  gold:
    min: 10
    max: 25
  xp: 50
  guaranteed_drops:
    - item: "Glitch Residue"
      quantity: 1
  chance_drops:
    - item: "Corrupted Memory Shard"
      chance: 40
      quantity: 1
    - item: "Phase Crystal"
      chance: 20
      quantity: 1
  rare_drops:
    - item: "Wraith Essence"
      chance: 10
      quantity: 1

type_traits:
  corrupted:
    - "Immune to corruption damage"
    - "Heals in corruption zones"
    - "Spreads minor corruption on hit"

encounter_notes: |
  Glitch Wraiths are excellent mid-tier threats that teach players about
  mobility and positioning. Their Phase Dash makes them slippery, but
  the cooldown creates windows of vulnerability.

  Combat tactics:
  - Opens with Phase Dash to reach healers/casters
  - Uses Corruption Aura to punish melee clustering
  - Retreats to corruption zones when wounded
  - Exploits environmental hazards actively

  Counters:
  - Holy damage bypasses resistance AND vulnerability
  - Crowd control (stuns) prevents Phase Dash
  - Spreading out reduces Corruption Aura effectiveness
  - Ranged focus fire before it can close distance

  In groups, wraiths coordinate flanking positions. Two wraiths on opposite
  sides of a party force difficult choices about who to engage first.

  The Error Echo ability adds uncertainty - don't assume the fight is over
  when the wraith goes down. Smart players will ready an action to kill
  the potential parasite immediately.

metadata:
  created: "2026-02-03"
  author: "Coda"
  source: "Corrupted users and programs that lost cohesion"
  cr_equivalent: 2
